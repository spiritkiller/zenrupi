name: Send ZenRupi

on:
  workflow_dispatch:  # Manuel olarak başlatmak için

jobs:
  send_zenrupi:
    runs-on: ubuntu-latest

    steps:
      - name: 🚀 Depoyu Kopyala
        uses: actions/checkout@v4

      - name: 🛠️ Python ve Bağımlılıkları Kur
        run: |
          python3 -m venv venv
          source venv/bin/activate
          pip install -r requirements.txt  # Bağımlılıkları kur

      - name: 🔑 Ortam Değişkenlerini Ayarla
        env:
          ISSUER_SECRET_KEY: ${{ secrets.ISSUER_SECRET_KEY }}
          DISTRIBUTION_SECRET_KEY: ${{ secrets.DISTRIBUTION_SECRET_KEY }}
          DISTRIBUTION_PUBLIC_KEY: ${{ secrets.DISTRIBUTION_PUBLIC_KEY }}
        run: echo "Ortam değişkenleri ayarlandı"

      - name: 💰 ZenRupi Gönder
        run: python3 scripts/send_zenrupi.py
